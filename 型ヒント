# Pythonå‹ãƒ’ãƒ³ãƒˆå®Œå…¨ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆã€å®Ÿå‹™ã§ä½¿ãˆã‚‹ä¿å­˜ç‰ˆã€‘

## ã¯ã˜ã‚ã«
ã“ã®è¨˜äº‹ã‚’èª­ã‚ã°ã€Pythonã®å‹ãƒ’ãƒ³ãƒˆã‚’**0ã‹ã‚‰å®Ÿå‹™ãƒ¬ãƒ™ãƒ«ã¾ã§**ãƒã‚¹ã‚¿ãƒ¼ã§ãã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰1è¡Œãšã¤ä¸å¯§ã«è§£èª¬ã—ã¾ã™ã€‚

## ç›®æ¬¡
1. [å‹ãƒ’ãƒ³ãƒˆã®åŸºç¤](#åŸºç¤)
2. [æ¨™æº–çš„ãªå‹](#æ¨™æº–å‹)
3. [ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å‹](#ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³)
4. [Optional ã¨ Union](#optional-union)
5. [é–¢æ•°ã®å‹ãƒ’ãƒ³ãƒˆ](#é–¢æ•°)
6. [ã‚¯ãƒ©ã‚¹ã®å‹ãƒ’ãƒ³ãƒˆ](#ã‚¯ãƒ©ã‚¹)
7. [é«˜åº¦ãªå‹ãƒ’ãƒ³ãƒˆ](#é«˜åº¦)
8. [å®Ÿå‹™ãƒ‘ã‚¿ãƒ¼ãƒ³é›†](#å®Ÿå‹™)

---

## <a id="åŸºç¤"></a>1. å‹ãƒ’ãƒ³ãƒˆã®åŸºç¤

### å¤‰æ•°ã®å‹ãƒ’ãƒ³ãƒˆ

```python
# æ–‡å­—åˆ—å‹ã®å¤‰æ•°ã‚’å®£è¨€ï¼ˆå‹ãƒ’ãƒ³ãƒˆ: strï¼‰
name: str = "ç”°ä¸­å¤ªéƒ"

# æ•´æ•°å‹ã®å¤‰æ•°ã‚’å®£è¨€ï¼ˆå‹ãƒ’ãƒ³ãƒˆ: intï¼‰
age: int = 30

# æµ®å‹•å°æ•°ç‚¹æ•°å‹ã®å¤‰æ•°ã‚’å®£è¨€ï¼ˆå‹ãƒ’ãƒ³ãƒˆ: floatï¼‰
price: float = 1999.99

# çœŸå½å€¤å‹ã®å¤‰æ•°ã‚’å®£è¨€ï¼ˆå‹ãƒ’ãƒ³ãƒˆ: boolï¼‰
is_active: bool = True

# å‹ãƒ’ãƒ³ãƒˆã¯çœç•¥å¯èƒ½ã ãŒã€æ˜ç¤ºã™ã‚‹ã¨å¯èª­æ€§ãŒä¸ŠãŒã‚‹
email = "tanaka@example.com"  # å‹ãƒ’ãƒ³ãƒˆãªã—ï¼ˆæ¨å¥¨ã•ã‚Œãªã„ï¼‰
```

---

## <a id="æ¨™æº–å‹"></a>2. æ¨™æº–çš„ãªå‹

```python
# ======== åŸºæœ¬å‹ ========

# æ•´æ•°å‹
user_id: int = 12345

# æµ®å‹•å°æ•°ç‚¹æ•°å‹
tax_rate: float = 0.1

# æ–‡å­—åˆ—å‹
username: str = "admin"

# çœŸå½å€¤å‹
is_verified: bool = False

# ======== ç‰¹æ®Šãªå‹ ========

# Anyå‹ - ã©ã‚“ãªå‹ã§ã‚‚OKï¼ˆãªã‚‹ã¹ãä½¿ã‚ãªã„ï¼‰
from typing import Any
# ä»»æ„ã®å‹ã‚’å—ã‘å…¥ã‚Œã‚‹å¤‰æ•°
data: Any = "æ–‡å­—åˆ—ã§ã‚‚OK"
# æ•°å€¤ã«å¤‰æ›´ã—ã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
data = 123

# Noneå‹ - å€¤ãŒå­˜åœ¨ã—ãªã„ã“ã¨ã‚’æ˜ç¤º
# Noneå‹ã®å¤‰æ•°ã‚’å®£è¨€ï¼ˆåˆæœŸå€¤ãªã—ï¼‰
result: None = None
```

---

## <a id="ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³"></a>3. ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å‹

### Python 3.9ä»¥é™ã®æ›¸ãæ–¹ï¼ˆæ¨å¥¨ï¼‰

```python
# ======== ãƒªã‚¹ãƒˆï¼ˆlistï¼‰ ========

# intå‹ã®è¦ç´ ã‚’æŒã¤ãƒªã‚¹ãƒˆã‚’å®£è¨€
numbers: list[int] = [1, 2, 3, 4, 5]

# strå‹ã®è¦ç´ ã‚’æŒã¤ãƒªã‚¹ãƒˆã‚’å®£è¨€
names: list[str] = ["å¤ªéƒ", "èŠ±å­", "æ¬¡éƒ"]

# floatå‹ã®è¦ç´ ã‚’æŒã¤ãƒªã‚¹ãƒˆ
prices: list[float] = [100.5, 200.0, 300.75]

# ======== è¾æ›¸ï¼ˆdictï¼‰ ========

# ã‚­ãƒ¼: strå‹ã€å€¤: intå‹ã®è¾æ›¸ã‚’å®£è¨€
scores: dict[str, int] = {
    "math": 90,      # æ•°å­¦ã®ç‚¹æ•°
    "english": 85,   # è‹±èªã®ç‚¹æ•°
    "science": 92    # ç†ç§‘ã®ç‚¹æ•°
}

# ã‚­ãƒ¼: intå‹ã€å€¤: strå‹ã®è¾æ›¸
user_names: dict[int, str] = {
    1: "ç”°ä¸­",    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ID 1 ã®åå‰
    2: "ä½è—¤",    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ID 2 ã®åå‰
    3: "éˆ´æœ¨"     # ãƒ¦ãƒ¼ã‚¶ãƒ¼ID 3 ã®åå‰
}

# è¤‡é›‘ãªè¾æ›¸å‹ï¼šã‚­ãƒ¼: strã€å€¤: int ã¾ãŸã¯ str
user_info: dict[str, int | str] = {
    "name": "ç”°ä¸­",   # åå‰ï¼ˆæ–‡å­—åˆ—ï¼‰
    "age": 30,        # å¹´é½¢ï¼ˆæ•°å€¤ï¼‰
    "email": "tanaka@example.com"  # ãƒ¡ãƒ¼ãƒ«ï¼ˆæ–‡å­—åˆ—ï¼‰
}

# ======== ã‚¿ãƒ—ãƒ«ï¼ˆtupleï¼‰ ========

# 2ã¤ã®intè¦ç´ ã‚’æŒã¤ã‚¿ãƒ—ãƒ«ï¼ˆåº§æ¨™ãªã©ï¼‰
point: tuple[int, int] = (10, 20)

# 3ã¤ã®è¦ç´ ã‚’æŒã¤ã‚¿ãƒ—ãƒ«ï¼ˆå‹ãŒç•°ãªã£ã¦ã‚‚OKï¼‰
person: tuple[str, int, bool] = ("ç”°ä¸­", 30, True)

# å¯å¤‰é•·ã‚¿ãƒ—ãƒ«ï¼šã™ã¹ã¦ã®è¦ç´ ãŒintå‹
numbers_tuple: tuple[int, ...] = (1, 2, 3, 4, 5)

# ======== ã‚»ãƒƒãƒˆï¼ˆsetï¼‰ ========

# strå‹ã®è¦ç´ ã‚’æŒã¤ã‚»ãƒƒãƒˆï¼ˆé‡è¤‡ãªã—ï¼‰
tags: set[str] = {"python", "typing", "programming"}

# intå‹ã®è¦ç´ ã‚’æŒã¤ã‚»ãƒƒãƒˆ
unique_ids: set[int] = {1, 2, 3, 4, 5}
```

### Python 3.8ä»¥å‰ã®æ›¸ãæ–¹ï¼ˆäº’æ›æ€§ã®ãŸã‚ï¼‰

```python
# typing ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰å‹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
from typing import List, Dict, Tuple, Set

# List[å‹] ã®å½¢å¼ã§æ›¸ã
old_numbers: List[int] = [1, 2, 3]

# Dict[ã‚­ãƒ¼å‹, å€¤å‹] ã®å½¢å¼ã§æ›¸ã
old_scores: Dict[str, int] = {"math": 90}

# Tuple[å‹1, å‹2, ...] ã®å½¢å¼ã§æ›¸ã
old_point: Tuple[int, int] = (10, 20)

# Set[å‹] ã®å½¢å¼ã§æ›¸ã
old_tags: Set[str] = {"python", "typing"}
```

---

## <a id="optional-union"></a>4. Optional ã¨ Union

### Optionalå‹ï¼ˆå€¤ãŒNoneã®å¯èƒ½æ€§ãŒã‚ã‚‹ï¼‰

```python
# Python 3.10ä»¥é™ã®æ›¸ãæ–¹ï¼ˆæ¨å¥¨ï¼‰

# strå‹ã¾ãŸã¯Noneã‚’å–ã‚‹å¤‰æ•°
# | None ã§ã€ŒNoneã®å¯èƒ½æ€§ã‚ã‚Šã€ã‚’è¡¨ç¾
nickname: str | None = None

# intå‹ã¾ãŸã¯Noneã‚’å–ã‚‹å¤‰æ•°
user_age: int | None = 25

# å¾Œã§Noneã«å¤‰æ›´å¯èƒ½
user_age = None  # ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„

# ======== é–¢æ•°ã§ã®ä½¿ç”¨ä¾‹ ========

# å¼•æ•°user_idã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œç´¢ã—ã€è¦‹ã¤ã‹ã‚‰ãªã‘ã‚Œã°Noneã‚’è¿”ã™
# æˆ»ã‚Šå€¤ã®å‹: str | None
def find_username(user_id: int) -> str | None:
    # user_idãŒ1ã®å ´åˆ
    if user_id == 1:
        # ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’è¿”ã™
        return "ç”°ä¸­"
    # è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯Noneã‚’è¿”ã™
    return None

# é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦çµæœã‚’å–å¾—
result: str | None = find_username(999)

# Noneãƒã‚§ãƒƒã‚¯ï¼ˆé‡è¦ï¼ï¼‰
if result is not None:
    # Noneã§ãªã„å ´åˆã®ã¿å‡¦ç†ï¼ˆå‹ã‚¬ãƒ¼ãƒ‰ï¼‰
    print(f"ãƒ¦ãƒ¼ã‚¶ãƒ¼å: {result}")
else:
    # Noneã®å ´åˆã®å‡¦ç†
    print("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
```

```python
# Python 3.9ä»¥å‰ã®æ›¸ãæ–¹

# typing ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰Optionalã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
from typing import Optional

# Optional[str] ã¯ str | None ã¨åŒã˜æ„å‘³
old_nickname: Optional[str] = None

# Optional[int] ã¯ int | None ã¨åŒã˜æ„å‘³
old_age: Optional[int] = 25
```

### Unionå‹ï¼ˆè¤‡æ•°ã®å‹ã®ã„ãšã‚Œã‹ï¼‰

```python
# Python 3.10ä»¥é™ã®æ›¸ãæ–¹ï¼ˆæ¨å¥¨ï¼‰

# intå‹ã¾ãŸã¯strå‹ã‚’å–ã‚‹å¤‰æ•°
# | ã§ã€Œã¾ãŸã¯ã€ã‚’è¡¨ç¾
user_id: int | str = 12345

# å¾Œã§strå‹ã«å¤‰æ›´å¯èƒ½
user_id = "USER_12345"  # ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„

# 3ã¤ä»¥ä¸Šã®å‹ã‚‚å¯èƒ½
value: int | str | float = 100

# ======== é–¢æ•°ã§ã®ä½¿ç”¨ä¾‹ ========

# intå‹ã¾ãŸã¯strå‹ã‚’å—ã‘å–ã‚Šã€strå‹ã§è¿”ã™é–¢æ•°
def format_id(id_value: int | str) -> str:
    # ã©ã¡ã‚‰ã®å‹ã§ã‚‚strå‹ã«å¤‰æ›ã—ã¦è¿”ã™
    return f"ID: {str(id_value)}"

# intå‹ã§å‘¼ã³å‡ºã—
result1: str = format_id(123)  # "ID: 123"

# strå‹ã§å‘¼ã³å‡ºã—
result2: str = format_id("ABC")  # "ID: ABC"
```

```python
# Python 3.9ä»¥å‰ã®æ›¸ãæ–¹

# typing ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰Unionã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
from typing import Union

# Union[int, str] ã¯ int | str ã¨åŒã˜æ„å‘³
old_user_id: Union[int, str] = 12345

# Union[int, str, float] ã¯ int | str | float ã¨åŒã˜æ„å‘³
old_value: Union[int, str, float] = 100
```

---

## <a id="é–¢æ•°"></a>5. é–¢æ•°ã®å‹ãƒ’ãƒ³ãƒˆ

### åŸºæœ¬çš„ãªé–¢æ•°

```python
# å¼•æ•°a, bã¯å…±ã«intå‹ã€æˆ»ã‚Šå€¤ã‚‚intå‹
def add(a: int, b: int) -> int:
    # 2ã¤ã®æ•°å€¤ã‚’è¶³ã—ã¦è¿”ã™
    return a + b

# å¼•æ•°nameã¯strå‹ã€æˆ»ã‚Šå€¤ã‚‚strå‹
def greet(name: str) -> str:
    # æŒ¨æ‹¶æ–‡ã‚’ä½œæˆã—ã¦è¿”ã™
    return f"ã“ã‚“ã«ã¡ã¯ã€{name}ã•ã‚“"

# æˆ»ã‚Šå€¤ãŒãªã„å ´åˆã¯ -> None
def print_message(message: str) -> None:
    # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼ˆè¿”ã‚Šå€¤ãªã—ï¼‰
    print(message)
    # returnæ–‡ãŒãªã„ã‹ã€return ã®ã¿

# å¼•æ•°ã«å‹ãƒ’ãƒ³ãƒˆã€æˆ»ã‚Šå€¤ã«ã‚‚å‹ãƒ’ãƒ³ãƒˆ
def calculate_tax(price: int, rate: float) -> float:
    # ç¨é¡ã‚’è¨ˆç®—ã—ã¦è¿”ã™
    return price * rate
```

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°

```python
# å¼•æ•°nameã¯å¿…é ˆã€greetingã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤"ã“ã‚“ã«ã¡ã¯"
# ä¸¡æ–¹strå‹ã€æˆ»ã‚Šå€¤ã‚‚strå‹
def create_greeting(name: str, greeting: str = "ã“ã‚“ã«ã¡ã¯") -> str:
    # æŒ¨æ‹¶æ–‡ã‚’ä½œæˆã—ã¦è¿”ã™
    return f"{greeting}ã€{name}ã•ã‚“"

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ç”¨
msg1: str = create_greeting("ç”°ä¸­")  # "ã“ã‚“ã«ã¡ã¯ã€ç”°ä¸­ã•ã‚“"

# ç‹¬è‡ªã®å€¤ã‚’æŒ‡å®š
msg2: str = create_greeting("ä½è—¤", "ãŠã¯ã‚ˆã†")  # "ãŠã¯ã‚ˆã†ã€ä½è—¤ã•ã‚“"
```

### å¯å¤‰é•·å¼•æ•°

```python
# *argsã§å¯å¤‰é•·ã®ä½ç½®å¼•æ•°ã‚’å—ã‘å–ã‚‹
# args ã®å‹: tuple[int, ...]ï¼ˆintå‹ã®å¯å¤‰é•·ã‚¿ãƒ—ãƒ«ï¼‰
def sum_numbers(*args: int) -> int:
    # ã™ã¹ã¦ã®å¼•æ•°ã‚’åˆè¨ˆã—ã¦è¿”ã™
    return sum(args)

# è¤‡æ•°ã®å¼•æ•°ã‚’æ¸¡ã›ã‚‹
total1: int = sum_numbers(1, 2, 3)  # 6
total2: int = sum_numbers(10, 20, 30, 40)  # 100

# **kwargsã§ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã‚’å—ã‘å–ã‚‹
# kwargs ã®å‹: dict[str, Any]ï¼ˆã‚­ãƒ¼: strã€å€¤: Anyï¼‰
def print_info(**kwargs: str) -> None:
    # ã™ã¹ã¦ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã‚’è¡¨ç¤º
    for key, value in kwargs.items():
        print(f"{key}: {value}")

# ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã§å‘¼ã³å‡ºã—
print_info(name="ç”°ä¸­", email="tanaka@example.com")
```

### è¤‡é›‘ãªæˆ»ã‚Šå€¤

```python
# è¤‡æ•°ã®å€¤ã‚’è¿”ã™ï¼ˆã‚¿ãƒ—ãƒ«ï¼‰
# æˆ»ã‚Šå€¤: tuple[str, int, bool]
def get_user_info(user_id: int) -> tuple[str, int, bool]:
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’3ã¤ã®å€¤ã§è¿”ã™
    name: str = "ç”°ä¸­"
    age: int = 30
    is_active: bool = True
    # ã‚¿ãƒ—ãƒ«ã§è¿”ã™
    return name, age, is_active

# æˆ»ã‚Šå€¤ã‚’å—ã‘å–ã‚‹ï¼ˆã‚¢ãƒ³ãƒ‘ãƒƒã‚¯ï¼‰
user_name, user_age, active = get_user_info(1)

# ãƒªã‚¹ãƒˆã‚’è¿”ã™é–¢æ•°
# æˆ»ã‚Šå€¤: list[int]ï¼ˆintå‹ã®ãƒªã‚¹ãƒˆï¼‰
def get_even_numbers(max_num: int) -> list[int]:
    # 0ã‹ã‚‰max_numã¾ã§ã®å¶æ•°ã‚’è¿”ã™
    return [i for i in range(max_num + 1) if i % 2 == 0]

# è¾æ›¸ã‚’è¿”ã™é–¢æ•°
# æˆ»ã‚Šå€¤: dict[str, int | str]ï¼ˆæ··åˆå‹ã®è¾æ›¸ï¼‰
def create_user_dict(name: str, age: int) -> dict[str, int | str]:
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’è¾æ›¸ã§è¿”ã™
    return {"name": name, "age": age}
```

---

## <a id="ã‚¯ãƒ©ã‚¹"></a>6. ã‚¯ãƒ©ã‚¹ã®å‹ãƒ’ãƒ³ãƒˆ

### åŸºæœ¬çš„ãªã‚¯ãƒ©ã‚¹

```python
# ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ç®¡ç†ã™ã‚‹ã‚¯ãƒ©ã‚¹
class User:
    # ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼šå¼•æ•°ã®å‹ã‚’æŒ‡å®šã€æˆ»ã‚Šå€¤ã¯ None
    def __init__(self, name: str, age: int, email: str) -> None:
        # ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã«å‹ãƒ’ãƒ³ãƒˆä»˜ãã§ä»£å…¥
        self.name: str = name
        self.age: int = age
        self.email: str = email
        # ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆTrueï¼‰
        self.is_active: bool = True
    
    # ãƒ¡ã‚½ãƒƒãƒ‰ï¼šå¼•æ•°ãªã—ã€æˆ»ã‚Šå€¤ã¯strå‹
    def get_info(self) -> str:
        # ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ–‡å­—åˆ—ã§è¿”ã™
        return f"{self.name} ({self.age}æ­³)"
    
    # ãƒ¡ã‚½ãƒƒãƒ‰ï¼šå¼•æ•°ã¯intå‹ã€æˆ»ã‚Šå€¤ã¯boolå‹
    def is_adult(self) -> bool:
        # 20æ­³ä»¥ä¸Šãªã‚‰Trueã€æœªæº€ãªã‚‰False
        return self.age >= 20
    
    # ãƒ¡ã‚½ãƒƒãƒ‰ï¼šå¼•æ•°ã¯strå‹ã€æˆ»ã‚Šå€¤ãªã—
    def update_email(self, new_email: str) -> None:
        # ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ›´æ–°
        self.email = new_email

# ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆï¼ˆå‹ãƒ’ãƒ³ãƒˆ: Userï¼‰
user: User = User("ç”°ä¸­å¤ªéƒ", 25, "tanaka@example.com")

# ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—
info: str = user.get_info()  # "ç”°ä¸­å¤ªéƒ (25æ­³)"
is_adult: bool = user.is_adult()  # True
```

### ã‚¯ãƒ©ã‚¹å¤‰æ•°ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°

```python
# å•†å“ã‚’ç®¡ç†ã™ã‚‹ã‚¯ãƒ©ã‚¹
class Product:
    # ã‚¯ãƒ©ã‚¹å¤‰æ•°ï¼šã™ã¹ã¦ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§å…±æœ‰ï¼ˆå‹ãƒ’ãƒ³ãƒˆä»˜ãï¼‰
    tax_rate: float = 0.1  # æ¶ˆè²»ç¨ç‡
    
    # ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
    def __init__(self, name: str, price: int) -> None:
        # ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ï¼ˆå„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å›ºæœ‰ï¼‰
        self.name: str = name
        self.price: int = price
    
    # ç¨è¾¼ä¾¡æ ¼ã‚’è¨ˆç®—ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
    def get_price_with_tax(self) -> float:
        # price Ã— (1 + tax_rate) ã‚’è¿”ã™
        return self.price * (1 + Product.tax_rate)
    
    # ã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ï¼šç¨ç‡ã‚’å¤‰æ›´
    @classmethod
    def set_tax_rate(cls, new_rate: float) -> None:
        # ã‚¯ãƒ©ã‚¹å¤‰æ•°ã‚’æ›´æ–°
        cls.tax_rate = new_rate

# ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
product: Product = Product("ãƒãƒ¼ãƒˆPC", 100000)

# ç¨è¾¼ä¾¡æ ¼ã‚’å–å¾—
price_with_tax: float = product.get_price_with_tax()  # 110000.0
```

### ç¶™æ‰¿ã¨ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰

```python
# åŸºåº•ã‚¯ãƒ©ã‚¹ï¼šå‹•ç‰©
class Animal:
    # ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
    def __init__(self, name: str) -> None:
        self.name: str = name
    
    # é³´ãå£°ã‚’è¿”ã™ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆã‚µãƒ–ã‚¯ãƒ©ã‚¹ã§ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ï¼‰
    def speak(self) -> str:
        # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        return "ä½•ã‹éŸ³ã‚’å‡ºã™"

# Animalã‚’ç¶™æ‰¿ã—ãŸDogã‚¯ãƒ©ã‚¹
class Dog(Animal):
    # ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆè¦ªã‚¯ãƒ©ã‚¹ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’å‘¼ã³å‡ºã™ï¼‰
    def __init__(self, name: str, breed: str) -> None:
        # è¦ªã‚¯ãƒ©ã‚¹ã®åˆæœŸåŒ–
        super().__init__(name)
        # çŠ¬ç¨®ã‚’è¿½åŠ 
        self.breed: str = breed
    
    # speakãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰
    def speak(self) -> str:
        # çŠ¬ã®é³´ãå£°ã‚’è¿”ã™
        return "ãƒ¯ãƒ³ãƒ¯ãƒ³"

# Animalã‚’ç¶™æ‰¿ã—ãŸCatã‚¯ãƒ©ã‚¹
class Cat(Animal):
    # speakãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰
    def speak(self) -> str:
        # çŒ«ã®é³´ãå£°ã‚’è¿”ã™
        return "ãƒ‹ãƒ£ãƒ¼"

# ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
dog: Dog = Dog("ãƒãƒ", "æŸ´çŠ¬")
cat: Cat = Cat("ã‚¿ãƒ")

# ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—
dog_sound: str = dog.speak()  # "ãƒ¯ãƒ³ãƒ¯ãƒ³"
cat_sound: str = cat.speak()  # "ãƒ‹ãƒ£ãƒ¼"
```

---

## <a id="é«˜åº¦"></a>7. é«˜åº¦ãªå‹ãƒ’ãƒ³ãƒˆ

### TypeAliasï¼ˆå‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼‰

```python
# Python 3.10ä»¥é™
from typing import TypeAlias

# è¤‡é›‘ãªå‹ã«åå‰ã‚’ä»˜ã‘ã¦å†åˆ©ç”¨
# ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å‹ã‚’å®šç¾©
UserDict: TypeAlias = dict[str, int | str]

# Emailã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒªã‚¹ãƒˆã®å‹ã‚’å®šç¾©
EmailList: TypeAlias = list[str]

# å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ç”¨ã—ãŸé–¢æ•°
def create_user(name: str, age: int) -> UserDict:
    # UserDictå‹ã®è¾æ›¸ã‚’è¿”ã™
    return {"name": name, "age": age}

# å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ç”¨ã—ãŸå¤‰æ•°å®£è¨€
users: list[UserDict] = [
    {"name": "ç”°ä¸­", "age": 30},
    {"name": "ä½è—¤", "age": 25}
]

# ãƒ¡ãƒ¼ãƒ«ãƒªã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹é–¢æ•°
def send_emails(emails: EmailList) -> None:
    # å„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã«é€ä¿¡ï¼ˆå®Ÿè£…ã¯çœç•¥ï¼‰
    for email in emails:
        print(f"é€ä¿¡: {email}")
```

### Callableï¼ˆé–¢æ•°å‹ï¼‰

```python
# typing ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰Callableã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
from typing import Callable

# é–¢æ•°ã‚’å¼•æ•°ã«å–ã‚‹é–¢æ•°
# callback ã®å‹: å¼•æ•°(int, int)ã€æˆ»ã‚Šå€¤int ã®é–¢æ•°
def apply_operation(
    a: int, 
    b: int, 
    callback: Callable[[int, int], int]
) -> int:
    # callbacké–¢æ•°ã‚’å®Ÿè¡Œã—ã¦çµæœã‚’è¿”ã™
    return callback(a, b)

# ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’å®šç¾©
def add(x: int, y: int) -> int:
    # è¶³ã—ç®—
    return x + y

def multiply(x: int, y: int) -> int:
    # æ›ã‘ç®—
    return x * y

# é–¢æ•°ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã™
result1: int = apply_operation(5, 3, add)       # 8
result2: int = apply_operation(5, 3, multiply)  # 15
```

### Literalï¼ˆãƒªãƒ†ãƒ©ãƒ«å‹ï¼‰

```python
# typing ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰Literalã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
from typing import Literal

# ç‰¹å®šã®å€¤ã®ã¿ã‚’è¨±å¯ã™ã‚‹å‹
# statusã¯ "active", "inactive", "pending" ã®ã„ãšã‚Œã‹
def set_status(status: Literal["active", "inactive", "pending"]) -> None:
    # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¨­å®šï¼ˆå®Ÿè£…ã¯çœç•¥ï¼‰
    print(f"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: {status}")

# æ­£ã—ã„å‘¼ã³å‡ºã—
set_status("active")  # OK

# é–“é•ã£ãŸå‘¼ã³å‡ºã—ï¼ˆå‹ãƒã‚§ãƒƒã‚«ãƒ¼ãŒã‚¨ãƒ©ãƒ¼ã‚’å‡ºã™ï¼‰
# set_status("unknown")  # ã‚¨ãƒ©ãƒ¼ï¼

# æ•°å€¤ã®Literal
def set_priority(priority: Literal[1, 2, 3]) -> None:
    # å„ªå…ˆåº¦ã‚’è¨­å®šï¼ˆ1, 2, 3ã®ã¿è¨±å¯ï¼‰
    print(f"å„ªå…ˆåº¦: {priority}")

set_priority(1)  # OK
# set_priority(5)  # ã‚¨ãƒ©ãƒ¼ï¼
```

### Genericï¼ˆã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ï¼‰

```python
# typing ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰TypeVarã¨Genericã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
from typing import TypeVar, Generic

# å‹å¤‰æ•°ã‚’å®šç¾©ï¼ˆä»»æ„ã®å‹ã‚’è¡¨ã™ï¼‰
T = TypeVar('T')

# ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã‚¯ãƒ©ã‚¹ï¼šã©ã‚“ãªå‹ã§ã‚‚æ ¼ç´ã§ãã‚‹ãƒœãƒƒã‚¯ã‚¹
class Box(Generic[T]):
    # ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼šTå‹ã®å€¤ã‚’å—ã‘å–ã‚‹
    def __init__(self, value: T) -> None:
        # Tå‹ã®å€¤ã‚’ä¿æŒ
        self.value: T = value
    
    # Tå‹ã®å€¤ã‚’å–å¾—ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
    def get(self) -> T:
        # ä¿æŒã—ã¦ã„ã‚‹å€¤ã‚’è¿”ã™
        return self.value
    
    # Tå‹ã®å€¤ã‚’è¨­å®šã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
    def set(self, value: T) -> None:
        # æ–°ã—ã„å€¤ã‚’è¨­å®š
        self.value = value

# intå‹ã®ãƒœãƒƒã‚¯ã‚¹ã‚’ä½œæˆ
int_box: Box[int] = Box(123)
num: int = int_box.get()  # 123

# strå‹ã®ãƒœãƒƒã‚¯ã‚¹ã‚’ä½œæˆ
str_box: Box[str] = Box("Hello")
text: str = str_box.get()  # "Hello"

# ã‚¸ã‚§ãƒãƒªãƒƒã‚¯é–¢æ•°
def get_first_item(items: list[T]) -> T | None:
    # ãƒªã‚¹ãƒˆã®æœ€åˆã®è¦ç´ ã‚’è¿”ã™ï¼ˆç©ºã®å ´åˆã¯Noneï¼‰
    if items:
        return items[0]
    return None

# intå‹ã®ãƒªã‚¹ãƒˆã§å‘¼ã³å‡ºã—
first_num: int | None = get_first_item([1, 2, 3])  # 1

# strå‹ã®ãƒªã‚¹ãƒˆã§å‘¼ã³å‡ºã—
first_str: str | None = get_first_item(["a", "b"])  # "a"
```

---

## <a id="å®Ÿå‹™"></a>8. å®Ÿå‹™ãƒ‘ã‚¿ãƒ¼ãƒ³é›†

### ãƒ‘ã‚¿ãƒ¼ãƒ³1: API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹å®šç¾©

```python
# typing ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰å¿…è¦ãªå‹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
from typing import TypeAlias

# API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹ã‚’å®šç¾©
ApiResponse: TypeAlias = dict[str, int | str | list[dict[str, str]]]

# ãƒ¦ãƒ¼ã‚¶ãƒ¼APIã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å‡¦ç†ã™ã‚‹é–¢æ•°
def fetch_user_data(user_id: int) -> ApiResponse:
    # APIå‘¼ã³å‡ºã—ï¼ˆãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™ï¼‰
    response: ApiResponse = {
        "user_id": user_id,           # ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆintï¼‰
        "name": "ç”°ä¸­å¤ªéƒ",            # åå‰ï¼ˆstrï¼‰
        "email": "tanaka@example.com", # ãƒ¡ãƒ¼ãƒ«ï¼ˆstrï¼‰
        "orders": [                    # æ³¨æ–‡ãƒªã‚¹ãƒˆï¼ˆlist[dict]ï¼‰
            {"order_id": "001", "product": "å•†å“A"},
            {"order_id": "002", "product": "å•†å“B"}
        ]
    }
    # ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™
    return response

# é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
user_data: ApiResponse = fetch_user_data(123)

# ãƒ‡ãƒ¼ã‚¿ã‚’å®‰å…¨ã«å–å¾—ï¼ˆå‹ãƒã‚§ãƒƒã‚¯ä»˜ãï¼‰
user_name: str = str(user_data["name"])
print(f"ãƒ¦ãƒ¼ã‚¶ãƒ¼å: {user_name}")
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«

```python
# dataclassesãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰dataclassã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
from dataclasses import dataclass
# datetimeãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
from datetime import datetime

# @dataclassãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®Userãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾å¿œã™ã‚‹ãƒ¢ãƒ‡ãƒ«
@dataclass
class UserModel:
    # å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å‹ãƒ’ãƒ³ãƒˆã‚’ä»˜ã‘ã‚‹
    id: int                      # ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
    username: str                # ãƒ¦ãƒ¼ã‚¶ãƒ¼å
    email: str                   # ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
    created_at: datetime         # ä½œæˆæ—¥æ™‚
    is_active: bool = True       # ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ï¼‰
    
    # ãƒ¡ã‚½ãƒƒãƒ‰ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ–‡å­—åˆ—ã§è¿”ã™
    def to_dict(self) -> dict[str, int | str | bool]:
        # è¾æ›¸å½¢å¼ã«å¤‰æ›ã—ã¦è¿”ã™
        return {
            "id": self.id,
            "username": self.username,
            "email": self.email,
            "is_active": self.is_active
        }

# ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
user: UserModel = UserModel(
    id=1,
    username="tanaka",
    email="tanaka@example.com",
    created_at=datetime.now()
)

# ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—
user_dict: dict[str, int | str | bool] = user.to_dict()
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³3: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°

```python
# æ­£è¦è¡¨ç¾ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import re

# ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
# å¼•æ•°: strå‹ã®ãƒ¡ãƒ¼ãƒ«ã€æˆ»ã‚Šå€¤: boolå‹
def validate_email(email: str) -> bool:
    # ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³
    pattern: str = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
    # ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãƒãƒƒãƒã™ã‚‹ã‹ç¢ºèª
    is_valid: bool = bool(re.match(pattern, email))
    # çµæœã‚’è¿”ã™
    return is_valid

# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
# å¼•æ•°: strå‹ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€æˆ»ã‚Šå€¤: tuple[bool, str]
def validate_password(password: str) -> tuple[bool, str]:
    # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®é•·ã•ãƒã‚§ãƒƒã‚¯
    if len(password) < 8:
        # 8æ–‡å­—æœªæº€ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼
        return False, "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šå¿…è¦ã§ã™"
    
    # æ•°å­—ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    if not any(char.isdigit() for char in password):
        # æ•°å­—ãŒãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼
        return False, "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«ã¯æ•°å­—ã‚’å«ã‚ã¦ãã ã•ã„"
    
    # ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯ã‚’ãƒ‘ã‚¹
    return True, "OK"

# ãƒ¡ãƒ¼ãƒ«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ
is_valid_email: bool = validate_email("test@example.com")  # True
is_valid_email2: bool = validate_email("invalid-email")    # False

# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ
is_valid_pwd, message = validate_password("test123")
if is_valid_pwd:
    print("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯æœ‰åŠ¹ã§ã™")
else:
    print(f"ã‚¨ãƒ©ãƒ¼: {message}")
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³4: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```python
# Exception ã‚’ç¶™æ‰¿ã—ãŸã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ã‚¯ãƒ©ã‚¹
class UserNotFoundError(Exception):
    # ä¾‹å¤–ã‚¯ãƒ©ã‚¹ã¯passã§OKï¼ˆExceptionã®æ©Ÿèƒ½ã‚’ç¶™æ‰¿ï¼‰
    pass

class InvalidUserDataError(Exception):
    pass

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œç´¢ã™ã‚‹é–¢æ•°ï¼ˆä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã‚‹å¯èƒ½æ€§ï¼‰
# å¼•æ•°: intå‹ã®user_idã€æˆ»ã‚Šå€¤: dictå‹
# ä¾‹å¤–: UserNotFoundError ã‚’ç™ºç”Ÿã•ã›ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
def find_user(user_id: int) -> dict[str, str]:
    # ãƒ€ãƒŸãƒ¼ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
    users: dict[int, dict[str, str]] = {
        1: {"name": "ç”°ä¸­", "email": "tanaka@example.com"},
        2: {"name": "ä½è—¤", "email": "sato@example.com"}
    }
    
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãŒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«å­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    if user_id not in users:
        # å­˜åœ¨ã—ãªã„å ´åˆã¯ä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã‚‹
        raise UserNotFoundError(f"ãƒ¦ãƒ¼ã‚¶ãƒ¼ID {user_id} ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
    
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’è¿”ã™
    return users[user_id]

# ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å‡¦ç†ã™ã‚‹é–¢æ•°
def process_user(user_id: int) -> None:
    # try-exceptãƒ–ãƒ­ãƒƒã‚¯ã§ä¾‹å¤–ã‚’ã‚­ãƒ£ãƒƒãƒ
    try:
        # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œç´¢
        user: dict[str, str] = find_user(user_id)
        # æˆåŠŸã—ãŸå ´åˆã®å‡¦ç†
        print(f"ãƒ¦ãƒ¼ã‚¶ãƒ¼å: {user['name']}")
    
    # UserNotFoundErrorä¾‹å¤–ã‚’ã‚­ãƒ£ãƒƒãƒ
    except UserNotFoundError as e:
        # ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
        print(f"ã‚¨ãƒ©ãƒ¼: {e}")
    
    # ãã®ä»–ã™ã¹ã¦ã®ä¾‹å¤–ã‚’ã‚­ãƒ£ãƒƒãƒ
    except Exception as e:
        # äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤º
        print(f"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼: {e}")

# æ­£å¸¸ãªã‚±ãƒ¼ã‚¹
process_user(1)  # "ãƒ¦ãƒ¼ã‚¶ãƒ¼å: ç”°ä¸­"

# ä¾‹å¤–ãŒç™ºç”Ÿã™ã‚‹ã‚±ãƒ¼ã‚¹
process_user(999)  # "ã‚¨ãƒ©ãƒ¼: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID 999 ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³5: ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ

```python
# pathlibãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰Pathã‚¯ãƒ©ã‚¹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
from pathlib import Path

# JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€é–¢æ•°
# å¼•æ•°: Pathå‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã€æˆ»ã‚Šå€¤: dictå‹ã¾ãŸã¯None
def read_json_file(file_path: Path) -> dict[str, int | str] | None:
    # ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    if not file_path.exists():
        # å­˜åœ¨ã—ãªã„å ´åˆã¯Noneã‚’è¿”ã™
        return None
    
    # tryãƒ–ãƒ­ãƒƒã‚¯ã§ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ
    try:
        # ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ãƒ¢ãƒ¼ãƒ‰ã€UTF-8ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§é–‹ã
        with file_path.open('r', encoding='utf-8') as f:
            # JSONãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
            import json
            # JSONãƒ‡ãƒ¼ã‚¿ã‚’è¾æ›¸ã¨ã—ã¦èª­ã¿è¾¼ã‚€
            data: dict[str, int | str] = json.load(f)
            # ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™
            return data
    # ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸå ´åˆ
    except Exception as e:
        # ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
        print(f"ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: {e}")
        # Noneã‚’è¿”ã™
        return None

# JSONãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€é–¢æ•°
# å¼•æ•°: Pathå‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã€dictå‹ã®ãƒ‡ãƒ¼ã‚¿ã€æˆ»ã‚Šå€¤: boolå‹
def write_json_file(file_path: Path, data: dict[str, int | str]) -> bool:
    # tryãƒ–ãƒ­ãƒƒã‚¯ã§ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ
    try:
        # ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãè¾¼ã¿ãƒ¢ãƒ¼ãƒ‰ã€UTF-8ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§é–‹ã
        with file_path.open('w', encoding='utf-8') as f:
            # JSONãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
            import json
            # ãƒ‡ãƒ¼ã‚¿ã‚’JSONå½¢å¼ã§æ›¸ãè¾¼ã¿ï¼ˆã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ2ã€æ—¥æœ¬èªä¿æŒï¼‰
            json.dump(data, f, indent=2, ensure_ascii=False)
        # æˆåŠŸã—ãŸã‚‰Trueã‚’è¿”ã™
        return True
    # ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸå ´åˆ
    except Exception as e:
        # ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
        print(f"ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿ã‚¨ãƒ©ãƒ¼: {e}")
        # å¤±æ•—ã—ãŸã‚‰Falseã‚’è¿”ã™
        return False

# ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ä½œæˆ
config_path: Path = Path("config.json")

# æ›¸ãè¾¼ã‚€ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™
config_data: dict[str, int | str] = {
    "app_name": "MyApp",
    "version": "1.0.0",
    "port": 8000
}

# ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿
success: bool = write_json_file(config_path, config_data)

# æ›¸ãè¾¼ã¿ãŒæˆåŠŸã—ãŸå ´åˆ
if success:
    # ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿
    loaded_data: dict[str, int | str] | None = read_json_file(config_path)
    # ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ããŸå ´åˆ
    if loaded_data:
        print(f"ã‚¢ãƒ—ãƒªå: {loaded_data['app_name']}")
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³6: éåŒæœŸå‡¦ç†

```python
# asyncioãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import asyncio

# éåŒæœŸé–¢æ•°ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
# async def ã§éåŒæœŸé–¢æ•°ã‚’å®šç¾©
async def fetch_user_async(user_id: int) -> dict[str, int | str]:
    # éåŒæœŸã§ã‚¹ãƒªãƒ¼ãƒ—ï¼ˆAPIå‘¼ã³å‡ºã—ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼‰
    await asyncio.sleep(1)
    
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™
    return {
        "id": user_id,
        "name": f"ãƒ¦ãƒ¼ã‚¶ãƒ¼{user_id}"
    }

# éåŒæœŸé–¢æ•°ï¼šè¤‡æ•°ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
async def fetch_multiple_users(
    user_ids: list[int]
) -> list[dict[str, int | str]]:
    # è¤‡æ•°ã®éåŒæœŸã‚¿ã‚¹ã‚¯ã‚’ä½œæˆ
    # å„user_idã«å¯¾ã—ã¦fetch_user_asyncã‚’å®Ÿè¡Œ
    tasks: list[asyncio.Task[dict[str, int | str]]] = [
        asyncio.create_task(fetch_user_async(uid))
        for uid in user_ids
    ]
    
    # ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã™ã‚‹ã¾ã§å¾…æ©Ÿ
    results: list[dict[str, int | str]] = await asyncio.gather(*tasks)
    
    # çµæœã®ãƒªã‚¹ãƒˆã‚’è¿”ã™
    return results

# ãƒ¡ã‚¤ãƒ³é–¢æ•°ï¼ˆéåŒæœŸï¼‰
async def main() -> None:
    # å–å¾—ã—ãŸã„ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã®ãƒªã‚¹ãƒˆ
    user_ids: list[int] = [1, 2, 3, 4, 5]
    
    # è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’éåŒæœŸã§å–å¾—
    users: list[dict[str, int | str]] = await fetch_multiple_users(user_ids)
    
    # å„ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’è¡¨ç¤º
    for user in users:
        print(f"ID: {user['id']}, åå‰: {user['name']}")

# éåŒæœŸé–¢æ•°ã‚’å®Ÿè¡Œ
# asyncio.run(main())  # å®Ÿéš›ã«å®Ÿè¡Œã™ã‚‹å ´åˆã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚’å¤–ã™
```

---

## ã¾ã¨ã‚

### å‹ãƒã‚§ãƒƒã‚¯ãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨

```bash
# mypyã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install mypy

# å‹ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ
mypy your_script.py

# å³å¯†ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
mypy --strict your_script.py
```

### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **ã™ã¹ã¦ã®é–¢æ•°ã«å‹ãƒ’ãƒ³ãƒˆã‚’ä»˜ã‘ã‚‹**
2. **è¤‡é›‘ãªå‹ã¯ TypeAlias ã§åå‰ã‚’ä»˜ã‘ã‚‹**
3. **None ã®å¯èƒ½æ€§ãŒã‚ã‚‹å ´åˆã¯å¿…ãš `| None` ã‚’ä»˜ã‘ã‚‹**
4. **ã‚¯ãƒ©ã‚¹ã®ã™ã¹ã¦ã®ãƒ¡ã‚½ãƒƒãƒ‰ã«å‹ãƒ’ãƒ³ãƒˆã‚’ä»˜ã‘ã‚‹**
5. **mypy ãªã©ã§å®šæœŸçš„ã«å‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹**

### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•

```python
# âŒ é–“é•ã„ï¼šAnyå‹ã®å¤šç”¨
from typing import Any
def process_data(data: Any) -> Any:  # å‹ã®æ„å‘³ãŒãªã„
    return data

# âœ… æ­£ã—ã„ï¼šå…·ä½“çš„ãªå‹ã‚’æŒ‡å®š
def process_data(data: dict[str, int]) -> list[int]:
    return list(data.values())

# âŒ é–“é•ã„ï¼šNoneãƒã‚§ãƒƒã‚¯ãªã—
def get_name(user_id: int) -> str | None:
    return None if user_id < 0 else "ç”°ä¸­"

name = get_name(-1)
print(name.upper())  # ã‚¨ãƒ©ãƒ¼ï¼Noneã®å¯èƒ½æ€§

# âœ… æ­£ã—ã„ï¼šNoneãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã‚‹
name = get_name(1)
if name is not None:
    print(name.upper())  # å®‰å…¨
```

---

## ãŠã‚ã‚Šã«

ã“ã®è¨˜äº‹ã§ã€Pythonã®å‹ãƒ’ãƒ³ãƒˆã‚’**åŸºç¤ã‹ã‚‰å®Ÿå‹™ãƒ¬ãƒ™ãƒ«**ã¾ã§ç¶²ç¾…ã—ã¾ã—ãŸã€‚å‹ãƒ’ãƒ³ãƒˆã‚’ä½¿ã†ã“ã¨ã§ï¼š

- âœ… ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ãŒå‘ä¸Š
- âœ… ãƒã‚°ã®æ—©æœŸç™ºè¦‹
- âœ… IDE ã®è£œå®Œæ©Ÿèƒ½ãŒå¼·åŒ–
- âœ… ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãŒå®‰å…¨ã«

ãœã²å®Ÿå‹™ã§æ´»ç”¨ã—ã¦ãã ã•ã„ï¼ğŸ
